<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>xyz — Sui Purchases</title>
  <meta name="description" content="Sui purchases — Kaplan Asset Holdings." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f4faff; --text:#003e6b; --muted:#4d6a88;
      --sui-blue:#00baff; --ring:rgba(0,186,255,.25);
      --topbar-bg:#0b2a45; --topbar-text:#ffffff;
      --glow-strength:0.55; --divider:#d5e7f2;
      --nav-pill:#073055; --nav-pill-active:#0d3c68;
      --row-bg:#ffffff; --row-alt:#f1f7fb;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative}

    /* Ambient glow */
    body::before{
      content:"";position:fixed;top:-120px;right:-120px;width:520px;height:520px;pointer-events:none;
      background:
        radial-gradient(40% 40% at 70% 30%, rgba(56,232,255,.65) 0%, rgba(56,232,255,0) 70%),
        radial-gradient(55% 55% at 35% 65%, rgba(106,108,255,.55) 0%, rgba(106,108,255,0) 70%);
      filter:blur(40px) saturate(120%);opacity:var(--glow-strength);z-index:0;
    }

    /* Header + Nav */
    .topbar{width:100%;background:var(--topbar-bg);color:var(--topbar-text);position:relative;z-index:1}
    .topbar .inner{max-width:1200px;margin:0 auto;padding:12px 24px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{font-weight:700;font-size:1rem;letter-spacing:.2px}
    .nav{display:flex;gap:6px;flex-wrap:wrap}
    .nav a{color:#d8e7f7;text-decoration:none;font-weight:600;font-size:.9rem;padding:8px 12px;border-radius:999px;background:var(--nav-pill);border:1px solid rgba(255,255,255,.08)}
    .nav a:hover{background:var(--nav-pill-active)}
    .nav a.active{background:#128dd6;border-color:transparent;color:#fff}

    .container{max-width:1200px;margin:0 auto;padding:48px 24px}
    h1{font-size:1.6rem;font-weight:800;margin-bottom:10px}
    p.sub{color:var(--muted);margin-bottom:20px}

    /* Table */
    .table-wrap{width:100%;overflow:auto;border:1px solid var(--divider);border-radius:12px;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.05)}
    table{width:100%;border-collapse:collapse;font-variant-numeric:tabular-nums}
    thead th{
      text-align:left;font-size:.85rem;letter-spacing:.02em;color:var(--muted);font-weight:700;
      padding:14px 16px;background:#eef6fb;border-bottom:1px solid var(--divider);white-space:nowrap
    }
    tbody td{
      padding:14px 16px;border-bottom:1px solid var(--divider);vertical-align:middle;white-space:nowrap
    }
    tbody tr:nth-child(odd){background:var(--row-alt)}
    tbody tr:last-child td{border-bottom:none}

    /* Numbers in Sui blue */
    .num{color:var(--sui-blue);font-weight:800}

    /* Mobile */
    @media (max-width:720px){
      thead th,tbody td{padding:12px 12px}
      .container{padding:32px 16px}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="inner">
      <div class="brand">Kaplan Asset Holdings</div>
      <nav class="nav">
        <a href="index.html">Overview</a>
        <a class="active" href="purchases.html">Purchases</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <h1>Purchases</h1>
    <p class="sub">Lots are shown newest first. Acq Cost (£) includes fees. Avg SUI Cost (GBP) = Acq Cost ÷ SUI Acquired.</p>

    <div class="table-wrap">
      <table id="purchases">
        <thead>
          <tr>
            <th>Count</th>
            <th>Reported</th>
            <th>SUI Acquired</th>
            <th>Avg SUI Cost (GBP)</th>
            <th>Acq Cost (£)</th>
            <th>SUI Holdings</th>
          </tr>
        </thead>
        <tbody><!-- rows injected by JS --></tbody>
      </table>
    </div>
  </div>

  <script>
  (function(){
    // === EDIT THIS ARRAY with your actual lots ===
    // Fields: date (ISO or readable), direction ('BUY'|'SELL'|'DEPOSIT'), pair, amount (tokens), valueGBP, fee
    const TRADES = [
      { date: "2025-10-22 11:02", direction: "BUY",     pair:"SUI/GBP", amount: 823.8576, valueGBP: 1500.05, fee: 5.27 },
      { date: "2025-10-22 11:01", direction: "DEPOSIT", pair:"GBP",     amount: 1505.32,  valueGBP: 1505.32, fee: 0.00 }, // non-token funding (ignored in holdings)
      { date: "2025-10-21 02:53", direction: "BUY",     pair:"SUI/BTC", amount: 1_050.12, valueGBP: 2.02,    fee: 0.00 }, // sample only
      { date: "2025-10-20 12:12", direction: "BUY",     pair:"SUI/GBP", amount: 1290.562, valueGBP: 2536.55, fee: 8.91 },
      { date: "2025-10-10 22:45", direction: "SELL",    pair:"SUI/GBP", amount: 310.9235, valueGBP: 584.99,  fee: 2.05 },
      { date: "2025-10-07 23:57", direction: "BUY",     pair:"SUI/GBP", amount: 752.561,  valueGBP: 1992.99, fee: 7.00 },
    ];
    // === end editable ===

    const locale = "en-GB";
    const nf0 = new Intl.NumberFormat(locale,{maximumFractionDigits:0});
    const nf2 = new Intl.NumberFormat(locale,{minimumFractionDigits:2,maximumFractionDigits:2});

    // Newest first
    TRADES.sort((a,b)=> new Date(b.date) - new Date(a.date));

    const tbody = document.querySelector("#purchases tbody");
    let runningHoldings = 0;

    const rows = TRADES.map((t, idx) => {
      // count
      const count = TRADES.length - idx;

      // Only count SUI movements into 'SUI Acquired' and holdings if pair is SUI/* or */SUI
      const isSuiPair = /SUI/i.test(t.pair || "");
      const direction = (t.direction || "").toUpperCase();

      // SUI acquired per lot:
      let suiAcq = 0;
      if (isSuiPair) {
        if (direction === "BUY" || direction === "DEPOSIT") suiAcq = Math.max(+t.amount || 0, 0);
        if (direction === "SELL") suiAcq = -Math.max(+t.amount || 0, 0);
      }

      // Acquisition cost in £ includes fee (SELL lots show the value received; we subtract from holdings but keep Acq Cost positive for display)
      const acqCost = Math.max((+t.valueGBP || 0) + (+t.fee || 0), 0);

      // Avg cost per SUI (BUY/DEPOSIT lots only; blank if sell or zero)
      const avgCost = suiAcq > 0 ? (acqCost / suiAcq) : NaN;

      // Running holdings
      runningHoldings += suiAcq;

      return `
        <tr>
          <td>${count}</td>
          <td>${escapeHtml(t.date)}</td>
          <td class="num">${suiAcq === 0 ? "—" : nf2.format(suiAcq)}</td>
          <td class="num">${isFinite(avgCost) ? "£"+nf2.format(avgCost) : "—"}</td>
          <td class="num">£${nf2.format(acqCost)}</td>
          <td class="num">${nf0.format(runningHoldings)}</td>
        </tr>
      `;
    });

    tbody.innerHTML = rows.join("");

    function escapeHtml(s){return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}
  })();
  </script>
</body>
</html>
